var e=require("@inertiajs/inertia"),r=require("react");function n(){return(n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var t=r.createContext();function o(o){var a=o.children,i=o.initialPage,s=o.resolveComponent,u=o.resolveErrors,c=o.transformProps,l=r.useState({component:null,page:{},key:null}),f=l[0],p=l[1];if(r.useEffect(function(){e.Inertia.init({initialPage:i,resolveComponent:s,resolveErrors:u,transformProps:c,swapComponent:function(e){var r=e.component,n=e.page,t=e.preserveState;try{return p(function(e){return{component:r,page:n,key:t?e.key:Date.now()}}),Promise.resolve()}catch(e){return Promise.reject(e)}}})},[i,s,u,c]),!f.component)return r.createElement(t.Provider,{value:f.page},null);var d=a||function(e){var t=e.Component,o=r.createElement(t,n({key:e.key},e.props));return"function"==typeof t.layout?t.layout(o):Array.isArray(t.layout)?t.layout.concat(o).reverse().reduce(function(e,n){return r.createElement(n,{children:e})}):o};return r.createElement(t.Provider,{value:f.page},d({Component:f.component,key:f.key,props:f.page.props}))}t.displayName="InertiaPageContext",o.displayName="Inertia";var a=function(){},i=r.forwardRef(function(t,o){var i=t.children,s=t.as,u=void 0===s?"a":s,c=t.data,l=void 0===c?{}:c,f=t.href,p=t.method,d=void 0===p?"get":p,v=t.preserveScroll,m=void 0!==v&&v,h=t.preserveState,g=void 0===h?null:h,y=t.replace,S=void 0!==y&&y,k=t.only,C=void 0===k?[]:k,P=t.headers,b=void 0===P?{}:P,E=t.onClick,w=void 0===E?a:E,x=t.onCancelToken,I=void 0===x?a:x,T=t.onBefore,O=void 0===T?a:T,j=t.onStart,F=void 0===j?a:j,L=t.onProgress,B=void 0===L?a:L,R=t.onFinish,A=void 0===R?a:R,D=t.onCancel,N=void 0===D?a:D,U=t.onSuccess,q=void 0===U?a:U,H=t.onError,Q=void 0===H?a:H,W=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r.indexOf(n=a[t])>=0||(o[n]=e[n]);return o}(t,["children","as","data","href","method","preserveScroll","preserveState","replace","only","headers","onClick","onCancelToken","onBefore","onStart","onProgress","onFinish","onCancel","onSuccess","onError"]),z=r.useCallback(function(r){w(r),e.shouldIntercept(r)&&(r.preventDefault(),e.Inertia.visit(f,{data:l,method:d,preserveScroll:m,preserveState:null!=g?g:"get"!==d,replace:S,only:C,headers:b,onCancelToken:I,onBefore:O,onStart:F,onProgress:B,onFinish:A,onCancel:N,onSuccess:q,onError:Q}))},[l,f,d,m,g,S,C,b,w,I,O,F,B,A,N,q,Q]);u=u.toLowerCase(),d=d.toLowerCase();var G=e.mergeDataIntoQueryString(d,e.hrefToUrl(f),l);return f=G[0].href,l=G[1],"a"===u&&"get"!==d&&console.warn('Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.\n\nPlease specify a more appropriate element using the "as" attribute. For example:\n\n<InertiaLink href="'+f+'" method="'+d+'" as="button">...</InertiaLink>'),r.createElement(u,n({},W,"a"===u?{href:f}:{},{ref:o,onClick:z}),i)});function s(n,t){var o=r.useState(function(){var r=e.Inertia.restore(t);return void 0!==r?r:n}),a=o[0],i=o[1];return r.useEffect(function(){e.Inertia.remember(a,t)},[a,t]),[a,i]}exports.App=o,exports.InertiaApp=o,exports.InertiaLink=i,exports.Link=i,exports.app=o,exports.link=i,exports.useForm=function(t,o){var a=function(e){return e},i=r.useRef(null),u=s(t,o+"-data"),c=u[0],l=u[1],f=s({},o+"-errors"),p=f[0],d=f[1],v=r.useState(!1),m=v[0],h=v[1],g=r.useState(!1),y=g[0],S=g[1],k=r.useState(null),C=k[0],P=k[1],b=r.useState(!1),E=b[0],w=b[1],x=r.useState(!1),I=x[0],T=x[1],O=r.useCallback(function(r,t,o){void 0===o&&(o={});var s=n({},o,{onBefore:function(e){if(w(!1),T(!1),clearTimeout(i.current),o.onBefore)return o.onBefore(e)},onStart:function(e){if(S(!0),o.onStart)return o.onStart(e)},onProgress:function(e){if(P(e),o.onProgress)return o.onProgress(e)},onSuccess:function(e){if(d({}),h(!1),w(!0),T(!0),i.current=setTimeout(function(){return T(!1)},2e3),o.onSuccess)return o.onSuccess(e)},onError:function(e){if(d(e),h(!0),o.onError)return o.onError(e)},onFinish:function(){if(S(!1),P(null),o.onFinish)return o.onFinish()}});"delete"===r?e.Inertia.delete(t,n({},s,{data:a(c)})):e.Inertia[r](t,a(c),s)},[c,d]);return{data:c,setData:function(e,r){var t;l("string"==typeof e?n({},c,((t={})[e]=r,t)):"function"==typeof e?function(r){return e(r)}:e)},errors:p,hasErrors:m,processing:y,progress:C,wasSuccessful:E,recentlySuccessful:I,transform:function(e){a=e},reset:function(){var e=[].slice.call(arguments);l(0===e.length?t:Object.keys(t).filter(function(r){return e.includes(r)}).reduce(function(e,r){return e[r]=t[r],e},{}))},clearErrors:function(){var e=[].slice.call(arguments);d(Object.keys(p).reduce(function(r,t){var o;return n({},r,e.length>0&&!e.includes(t)?((o={})[t]=p[t],o):{})},{})),h(Object.keys(p).length>0)},submit:O,get:function(e,r){O("get",e,r)},post:function(e,r){O("post",e,r)},put:function(e,r){O("put",e,r)},patch:function(e,r){O("patch",e,r)},delete:function(e,r){O("delete",e,r)}}},exports.usePage=function(){var e=r.useContext(t);if(!e)throw new Error("usePage must be used within the Inertia component");return e},exports.useRemember=s,exports.useRememberedState=function(e,r){return console.warn('The "useRememberedState" hook has been deprecated and will be removed in a future release. Use "useRemember" instead.'),s(e,r)};
//# sourceMappingURL=index.js.map
